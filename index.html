<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Simpli - Předplatné</title>
<style>
body{font-family:system-ui,Segoe UI,Arial;padding:24px}
button{padding:12px 18px;font-size:16px}
</style>
</head>
<body>
<h1>Simpli</h1>
<p>Klikni pro zaplacení předplatného a okamžitou aktivaci v aplikaci.</p>


<label for="email">E-mail (pro identifikaci v Base44):</label><br>
<input id="customer-email" placeholder="you@example.com" style="padding:8px;margin:8px 0;width:300px" />
<br>
<button id="checkout-button">Koupit předplatné</button>


<script src="https://js.stripe.com/v3/"></script>
<script>
// >>> ZDE vlož svůj Stripe PUBLISHABLE KEY (pk_test_xxx) <<<
const STRIPE_PUBLISHABLE_KEY = "pk_test_51SXpim0ni8h4CvJZFE4tguJpaCTWhrhMz4sEvu17zf5YtZaU2vRoVL9ORAiFqGEHLPbDRAZF87NidcxayeMdJBhr00WTJuUVKo";


// >>> ZDE vlož URL svého Vercel backendu <<<
const BACKEND_BASE = "https://sssssimpliari.vercel.app";


const stripe = Stripe(pk_test_51SXpim0ni8h4CvJZFE4tguJpaCTWhrhMz4sEvu17zf5YtZaU2vRoVL9ORAiFqGEHLPbDRAZF87NidcxayeMdJBhr00WTJuUVKo);


document.getElementById('checkout-button').addEventListener('click', async () => {
const email = document.getElementById('customer-email').value.trim();
if(!email){ alert('Zadej prosím email'); return; }


const res = await fetch(`${BACKEND_BASE}/api/create-checkout-session`, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({ email })
});


if(!res.ok){
const t = await res.text();
alert('Chyba při vytváření session: '+t);
return;
}


const data = await res.json();
// redirectToCheckout expects sessionId
stripe.redirectToCheckout({ sessionId: data.id });
});
</script>
</body>
</html>
